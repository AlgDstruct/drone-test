kind: pipeline
name: build-my-site
type: docker

steps:
- name: build
  image: leins275/alg-dstruct
  commands:
    - make

- name: memcheck
  image: leins275/alg-dstruct
  commands:
    - valgrind --leak-check=full ./a.out

- name: run
  image: leins275/alg-dstruct
  commands:
    - ./a.out
  depends_on:
    - memcheck
    - build
